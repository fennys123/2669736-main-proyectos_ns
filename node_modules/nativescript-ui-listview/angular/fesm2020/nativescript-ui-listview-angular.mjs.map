{"version":3,"file":"nativescript-ui-listview-angular.mjs","sources":["../../../../../packages/ui-listview/angular/index.ts","../../../../../packages/ui-listview/angular/nativescript-ui-listview-angular.ts"],"sourcesContent":["import { View, KeyedTemplate, isIOS, LayoutBase, ObservableArray } from '@nativescript/core';\nimport { Component, DoCheck, Input, ElementRef, Inject, TemplateRef, EmbeddedViewRef, HostListener, IterableDiffers, IterableDiffer, ChangeDetectorRef, ViewContainerRef, Directive, OnInit, EventEmitter, Output, Host, ContentChild, AfterContentInit, NgModule, ViewChild, NO_ERRORS_SCHEMA, ChangeDetectionStrategy, IterableChangeRecord, TrackByFunction, NgZone, ComponentRef } from '@angular/core';\nimport { registerElement, CommentNode, extractSingleViewRecursive, NativeScriptRendererFactory, DetachedLoader } from '@nativescript/angular';\nimport { RadListView, ListViewLinearLayout, ListViewLayoutBase, ListViewViewType, ListViewStaggeredLayout, ListViewGridLayout, ReorderHandle, ListViewEventData, NG_VIEW } from 'nativescript-ui-listview';\n\n// {N} types declared manually due to ngc compiler not wanting global types bleeding in\ndeclare class NSMutableArray {\n\tstatic alloc: <T>() => NSMutableArray;\n\tcount: number;\n\tinit: () => NSMutableArray;\n\taddObject(v: any): void;\n}\ndeclare class UIView {\n\tstatic performWithoutAnimation(c: () => void);\n}\ndeclare class NSIndexPath {\n\tstatic indexPathForRowInSection(k: number, v: number): void;\n}\ndeclare type TKCollectionView = any;\n\nfunction isListLikeIterable(obj: any): boolean {\n\tif (!isJsObject(obj)) return false;\n\treturn (\n\t\tArray.isArray(obj) ||\n\t\t(!(obj instanceof Map) && // JS Map are iterables but return entries as [k, v]\n\t\t\tSymbol.iterator in obj)\n\t); // JS Iterable have a Symbol.iterator prop\n}\n\nfunction isJsObject(o: any): boolean {\n\treturn o !== null && (typeof o === 'function' || typeof o === 'object');\n}\n\nexport class ListItemContext extends ElementRef {\n\tconstructor(public $implicit?: any, public item?: any, public index?: number, public even?: boolean, public odd?: boolean, public category?: string) {\n\t\tsuper(item);\n\t}\n}\n\nexport type RootLocator = (nodes: Array<any>, nestLevel: number) => View;\n\n@Component({\n\tselector: 'RadListView',\n\ttemplate: `\n\t\t<DetachedContainer>\n\t\t\t<ng-container #loader></ng-container>\n\t\t</DetachedContainer>\n\t`,\n\tchangeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class RadListViewComponent {\n\tprivate _listView: RadListView;\n\tprivate _items: any;\n\tprivate _differ: IterableDiffer<any>;\n\tprivate _loaders: Array<ComponentRef<DetachedLoader>>;\n\n\tprivate _headerTemplate: TemplateRef<ElementRef>;\n\tprivate _footerTemplate: TemplateRef<ElementRef>;\n\tprivate _itemTemplate: TemplateRef<ElementRef>;\n\tprivate _groupTemplate: TemplateRef<ElementRef>;\n\tprivate _itemSwipeTemplate: TemplateRef<ElementRef>;\n\tprivate _loadOnDemandTemplate: TemplateRef<ElementRef>;\n\tprivate _templateMap: Map<string, KeyedTemplate>;\n\n\t@ViewChild('loader', { read: ViewContainerRef, static: false }) loader: ViewContainerRef;\n\t// Note: `static: true` - This is not going to be supported in Angular 9.\n\t// To migrate this we need to change `ngAfterContentInit` to `ngAfterViewInit`\n\t@ContentChild(TemplateRef, { read: TemplateRef, static: false }) itemTemplateQuery: TemplateRef<ListItemContext>;\n\t@Output() public setupItemView = new EventEmitter<any>();\n\t@Input() autoReuseViews = false;\n\n\tdetachedLoaderFactory() {\n\t\tconst ref = this.loader.createComponent(DetachedLoader, {\n\t\t\tindex: 0,\n\t\t});\n\t\tthis.loader.detach(0);\n\t\tthis._loaders.push(ref);\n\t\treturn ref;\n\t}\n\n\tconstructor(@Inject(ElementRef) private _elementRef: ElementRef, @Inject(IterableDiffers) private _iterableDiffers: IterableDiffers, @Inject(NativeScriptRendererFactory) private _renderer: NativeScriptRendererFactory, @Inject(NgZone) private _ngZone: NgZone) {\n\t\tthis._listView = _elementRef.nativeElement;\n\t\tthis._loaders = [];\n\n\t\t// We should consider setting this default value in the RadListView constructor.\n\t\tthis._listView.listViewLayout = new ListViewLinearLayout();\n\n\t\tconst component = this;\n\t\tthis._listView.itemViewDisposer = (): void => {\n\t\t\tif (this.loader) {\n\t\t\t\tthis.loader.clear();\n\t\t\t}\n\t\t};\n\n\t\tthis._listView.nativeScriptViewAdded = (parent: View, child: View): void => {\n\t\t\t// Consider exposing this in nativescript-angular as public API\n\t\t\t(<any>this._renderer).viewUtil.insertChild(parent, child);\n\t\t};\n\n\t\tthis._listView.itemViewLoader = (viewType): View => {\n\t\t\treturn this._ngZone.run(() => {\n\t\t\t\tswitch (viewType) {\n\t\t\t\t\tcase ListViewViewType.ItemView:\n\t\t\t\t\t\tif (component._itemTemplate && this.loader) {\n\t\t\t\t\t\t\t// this.loader.injector.get(ChangeDetectorRef).detach();\n\t\t\t\t\t\t\tconst typedView = this.getOrCreate(this._itemTemplate);\n\t\t\t\t\t\t\treturn typedView;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ListViewViewType.ItemSwipeView:\n\t\t\t\t\t\tif (component._itemSwipeTemplate && this.loader) {\n\t\t\t\t\t\t\tconst nativeItem = this.loader.createEmbeddedView(component._itemSwipeTemplate, new ListItemContext(), 0);\n\t\t\t\t\t\t\tconst typedView = getItemViewRoot(nativeItem);\n\t\t\t\t\t\t\ttypedView[NG_VIEW] = nativeItem;\n\t\t\t\t\t\t\treturn typedView;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ListViewViewType.LoadOnDemandView:\n\t\t\t\t\t\tif (component._loadOnDemandTemplate && this.loader) {\n\t\t\t\t\t\t\tconst viewRef = this.loader.createEmbeddedView(component._loadOnDemandTemplate, new ListItemContext(), 0);\n\t\t\t\t\t\t\tthis.detectChangesOnChild(viewRef, -1);\n\t\t\t\t\t\t\tconst nativeView = getItemViewRoot(viewRef);\n\t\t\t\t\t\t\tnativeView[NG_VIEW] = viewRef;\n\t\t\t\t\t\t\treturn nativeView;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ListViewViewType.HeaderView:\n\t\t\t\t\t\tif (component._headerTemplate && this.loader) {\n\t\t\t\t\t\t\tconst viewRef = this.loader.createEmbeddedView(component._headerTemplate, new ListItemContext(), 0);\n\t\t\t\t\t\t\tthis.detectChangesOnChild(viewRef, -1);\n\t\t\t\t\t\t\tconst nativeView = getItemViewRoot(viewRef);\n\t\t\t\t\t\t\tnativeView[NG_VIEW] = viewRef;\n\t\t\t\t\t\t\treturn nativeView;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ListViewViewType.GroupView:\n\t\t\t\t\t\tif (!this._listView.groupingFunction && this._listView._hasGroupingFunctionChanged) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (component._groupTemplate && this.loader) {\n\t\t\t\t\t\t\tconst viewRef = this.loader.createEmbeddedView(component._groupTemplate, new ListItemContext(), 0);\n\t\t\t\t\t\t\tthis.detectChangesOnChild(viewRef, -1);\n\t\t\t\t\t\t\tconst nativeView = getItemViewRoot(viewRef);\n\t\t\t\t\t\t\tnativeView[NG_VIEW] = viewRef;\n\t\t\t\t\t\t\treturn nativeView;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase ListViewViewType.FooterView:\n\t\t\t\t\t\tif (component._footerTemplate && this.loader) {\n\t\t\t\t\t\t\tconst viewRef = this.loader.createEmbeddedView(component._footerTemplate, new ListItemContext(), 0);\n\t\t\t\t\t\t\tthis.detectChangesOnChild(viewRef, -1);\n\t\t\t\t\t\t\tconst nativeView = getItemViewRoot(viewRef);\n\t\t\t\t\t\t\tnativeView[NG_VIEW] = viewRef;\n\t\t\t\t\t\t\treturn nativeView;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t}\n\n\tngAfterViewInit() {\n\t\tthis.setItemTemplates();\n\t}\n\n\tngOnDestroy() {\n\t\tthis._listView = null;\n\t\tthis._loaders.forEach((l) => l.destroy());\n\t\tthis._loaders = null;\n\t\tthis.viewToLoader = null;\n\t\tthis.viewToTemplate = null;\n\t\tthis.viewPool = null;\n\n\t\tthis._items = null;\n\t\tthis._differ = null;\n\t\tthis._headerTemplate = null;\n\t\tthis._footerTemplate = null;\n\t\tthis._itemTemplate = null;\n\t\tthis._groupTemplate = null;\n\t\tthis._itemSwipeTemplate = null;\n\t\tthis._loadOnDemandTemplate = null;\n\t\tif (this._templateMap) {\n\t\t\tthis._templateMap.clear();\n\t\t}\n\t\tthis._templateMap = null;\n\t}\n\n\tpublic get nativeElement(): RadListView {\n\t\treturn this._listView;\n\t}\n\n\tpublic get listView() {\n\t\treturn this._listView;\n\t}\n\n\tset loadOnDemandTemplate(value: TemplateRef<any>) {\n\t\tthis._loadOnDemandTemplate = value;\n\t\tthis._listView.refresh();\n\t}\n\n\tset headerTemplate(value: TemplateRef<ElementRef>) {\n\t\tthis._headerTemplate = value;\n\t\tif (this._listView.ios) {\n\t\t\tthis._listView.updateHeaderFooter();\n\t\t} else if (this._listView.android) {\n\t\t\tthis._listView['_updateHeader']();\n\t\t}\n\t}\n\n\tset groupTemplate(value: TemplateRef<ElementRef>) {\n\t\tthis._groupTemplate = value;\n\t}\n\n\tset footerTemplate(value: TemplateRef<ElementRef>) {\n\t\tthis._footerTemplate = value;\n\t\tif (this._listView.ios) {\n\t\t\tthis._listView.updateHeaderFooter();\n\t\t} else if (this._listView.android) {\n\t\t\tthis._listView['_updateFooter']();\n\t\t}\n\t}\n\n\tset itemTemplate(value: TemplateRef<ElementRef>) {\n\t\tthis._itemTemplate = value;\n\t\tthis._listView.refresh();\n\t}\n\n\tset itemSwipeTemplate(value: TemplateRef<ElementRef>) {\n\t\tthis._itemSwipeTemplate = value;\n\t\tthis._listView.refresh();\n\t}\n\n\t@Input() changeAnimationsEnabled: boolean = true;\n\t@Input() trackBy: TrackByFunction<any>;\n\t@Input() set items(value: any) {\n\t\tthis._items = value;\n\n\t\tlet needDiffer = true;\n\n\t\tif (value instanceof ObservableArray) {\n\t\t\tneedDiffer = false;\n\t\t}\n\n\t\tif (!this._differ) {\n\t\t\tif (needDiffer && isListLikeIterable(value)) {\n\t\t\t\tthis._differ = this._iterableDiffers.find(this._items).create(this.trackBy || ((index, item) => item));\n\t\t\t}\n\t\t\tthis._listView.items = this._items;\n\t\t}\n\t}\n\n\tngDoCheck() {\n\t\tif (this._differ) {\n\t\t\tconst changes = this._differ.diff(this._items);\n\t\t\tif (changes) {\n\t\t\t\tconst changeCounters = {\n\t\t\t\t\tadded: 0,\n\t\t\t\t\tmoved: 0,\n\t\t\t\t\tremoved: 0,\n\t\t\t\t\tchanged: 0,\n\t\t\t\t};\n\t\t\t\t[\n\t\t\t\t\t{ fn: changes.forEachAddedItem, key: 'added' },\n\t\t\t\t\t{ fn: changes.forEachMovedItem, key: 'moved' },\n\t\t\t\t\t{ fn: changes.forEachRemovedItem, key: 'removed' },\n\t\t\t\t\t{ fn: changes.forEachIdentityChange, key: 'changed' },\n\t\t\t\t].map(({ fn, key }: { fn: (x: (record: IterableChangeRecord<any>) => void) => void; key: string }) => {\n\t\t\t\t\tconst collector: string[] = [];\n\t\t\t\t\tfn.bind(changes)((record: IterableChangeRecord<any>) => {\n\t\t\t\t\t\tif (typeof record.previousIndex === 'number' && typeof record.currentIndex === 'number') {\n\t\t\t\t\t\t\tcollector.push(`${record.previousIndex} -> ${record.currentIndex}`);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcollector.push(`${record.previousIndex || record.currentIndex || 0}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tchangeCounters[key]++;\n\t\t\t\t\t});\n\t\t\t\t\treturn `${key}(${collector})`;\n\t\t\t\t});\n\n\t\t\t\tlet previousItemCount = 0;\n\t\t\t\tfor (const item in this._listView.items) {\n\t\t\t\t\tpreviousItemCount++;\n\t\t\t\t}\n\t\t\t\tlet incomingItemCount = 0;\n\t\t\t\tfor (const item in this._items) {\n\t\t\t\t\tincomingItemCount++;\n\t\t\t\t}\n\t\t\t\tconst totalReplacement = (changeCounters.added === incomingItemCount && changeCounters.removed === previousItemCount) || changeCounters.added > incomingItemCount || changeCounters.removed > previousItemCount;\n\n\t\t\t\tif (!totalReplacement && isIOS) {\n\t\t\t\t\tconst collectionView: TKCollectionView = this._listView.nativeViewProtected;\n\t\t\t\t\tif (collectionView) {\n\t\t\t\t\t\tconst _listView = this._listView;\n\t\t\t\t\t\tconst _items = this._items;\n\t\t\t\t\t\tconst processUpdates = () => {\n\t\t\t\t\t\t\tlet nativePaths = NSMutableArray.alloc<NSIndexPath>().init();\n\t\t\t\t\t\t\tchanges.forEachRemovedItem((record: IterableChangeRecord<any>) => {\n\t\t\t\t\t\t\t\tnativePaths.addObject(NSIndexPath.indexPathForRowInSection(record.previousIndex, 0));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (nativePaths.count) {\n\t\t\t\t\t\t\t\tcollectionView.deleteItemsAtIndexPaths(nativePaths);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tnativePaths = NSMutableArray.alloc<NSIndexPath>().init();\n\t\t\t\t\t\t\tchanges.forEachAddedItem((item) => {\n\t\t\t\t\t\t\t\tnativePaths.addObject(NSIndexPath.indexPathForRowInSection(item.currentIndex, 0));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (nativePaths.count) {\n\t\t\t\t\t\t\t\tcollectionView.insertItemsAtIndexPaths(nativePaths);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tnativePaths = NSMutableArray.alloc<NSIndexPath>().init();\n\t\t\t\t\t\t\tchanges.forEachMovedItem((item) => {\n\t\t\t\t\t\t\t\tcollectionView.moveItemAtIndexPathToIndexPath(NSIndexPath.indexPathForRowInSection(item.previousIndex, 0), NSIndexPath.indexPathForRowInSection(item.currentIndex, 0));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnativePaths = NSMutableArray.alloc<NSIndexPath>().init();\n\t\t\t\t\t\t\tchanges.forEachIdentityChange((item) => {\n\t\t\t\t\t\t\t\tnativePaths.addObject(NSIndexPath.indexPathForRowInSection(item.currentIndex, 0));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (nativePaths.count) {\n\t\t\t\t\t\t\t\tcollectionView.reloadItemsAtIndexPaths(nativePaths);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t_listView.items = _items;\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (this.changeAnimationsEnabled) {\n\t\t\t\t\t\t\tcollectionView.performBatchUpdatesCompletion(processUpdates, () => {});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tUIView.performWithoutAnimation(() => {\n\t\t\t\t\t\t\t\tcollectionView.performBatchUpdatesCompletion(processUpdates, () => {});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis._listView.items = this._items;\n\t\t\t\t\tthis._listView.refresh();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t@HostListener('itemLoadingInternal', ['$event'])\n\tpublic onItemLoadingInternal(args: any) {\n\t\tconst index = args.index;\n\t\tconst currentItem = args.view.bindingContext;\n\t\tlet ngView = args.view[NG_VIEW];\n\n\t\t// Getting angular view from original element (in cases when ProxyViewContainer\n\t\t// is used NativeScript internally wraps it in a StackLayout)\n\t\tif (!ngView && args.view instanceof LayoutBase && args.view.getChildrenCount() > 0) {\n\t\t\tngView = args.view.getChildAt(0)[NG_VIEW];\n\t\t}\n\n\t\tif (ngView) {\n\t\t\tthis.setupViewRef(ngView, currentItem, index);\n\t\t\tif (args.android) {\n\t\t\t\t// ios implements the itemReappearingInternal event so we don't reattach, just detect changes until the view is shown\n\t\t\t\tthis.attachChild(ngView);\n\t\t\t}\n\t\t\tthis.detectChangesOnChild(ngView, index);\n\t\t}\n\t}\n\n\t@HostListener('itemReappearingInternal', ['$event'])\n\tpublic onItemReappearingInternal(args: any) {\n\t\tif (!args.view) {\n\t\t\treturn;\n\t\t}\n\t\tlet ngView: EmbeddedViewRef<any> = args.view[NG_VIEW];\n\n\t\t// Getting angular view from original element (in cases when ProxyViewContainer\n\t\t// is used NativeScript internally wraps it in a StackLayout)\n\t\tif (!ngView && args.view instanceof LayoutBase && args.view.getChildrenCount() > 0) {\n\t\t\tngView = args.view.getChildAt(0)[NG_VIEW];\n\t\t}\n\t\t// console.log('reappearing', args.view);\n\n\t\tif (ngView) {\n\t\t\tthis.attachChild(ngView);\n\t\t}\n\t}\n\n\t@HostListener('itemRecyclingInternal', ['$event'])\n\tpublic onItemRecyclingInternal(args: any) {\n\t\tif (!args.view) {\n\t\t\treturn;\n\t\t}\n\t\tlet ngView: EmbeddedViewRef<any> = args.view[NG_VIEW];\n\n\t\t// Getting angular view from original element (in cases when ProxyViewContainer\n\t\t// is used NativeScript internally wraps it in a StackLayout)\n\t\tif (!ngView && args.view instanceof LayoutBase && args.view.getChildrenCount() > 0) {\n\t\t\tngView = args.view.getChildAt(0)[NG_VIEW];\n\t\t}\n\t\t// console.log('recycling', args.view);\n\n\t\tif (ngView) {\n\t\t\tngView.detach();\n\t\t}\n\t}\n\n\t@HostListener('itemDisposingInternal', ['$event'])\n\tpublic onItemDisposingInternal(args: any) {\n\t\tif (!args.view) {\n\t\t\treturn;\n\t\t}\n\t\tif (args.view.parent) {\n\t\t\targs.view.parent.removeChild(args.view);\n\t\t}\n\t\t// console.log('disposing');\n\t\tlet ngView: EmbeddedViewRef<any> = args.view[NG_VIEW];\n\t\t// console.log('disposing', args.view);\n\n\t\t// Getting angular view from original element (in cases when ProxyViewContainer\n\t\t// is used NativeScript internally wraps it in a StackLayout)\n\t\tif (!ngView && args.view instanceof LayoutBase && args.view.getChildrenCount() > 0) {\n\t\t\tngView = args.view.getChildAt(0)[NG_VIEW];\n\t\t}\n\n\t\tif (ngView) {\n\t\t\tngView.detach();\n\t\t\tthis.storeViewRef(ngView);\n\t\t}\n\t}\n\n\tpublic setupViewRef(viewRef: EmbeddedViewRef<any>, data: any, index: number): void {\n\t\tconst context = viewRef.context;\n\t\tcontext.$implicit = data;\n\t\tcontext.item = data;\n\t\tcontext.category = data ? data.category : '';\n\t\tcontext.index = index;\n\t\tcontext.even = index % 2 === 0;\n\t\tcontext.odd = !context.even;\n\n\t\tthis.setupItemView.next({ view: viewRef, data: data, index: index, context: context });\n\t\t// this.detectChangesOnChild(viewRef, -1);\n\t}\n\n\tpublic setLayout(layout: any) {\n\t\tthis._listView.listViewLayout = layout;\n\t}\n\n\tprivate attachChild(viewRef: EmbeddedViewRef<ListItemContext>) {\n\t\tconst loader = this.viewToLoader.get(viewRef);\n\t\tif (loader && this.loader.indexOf(loader.hostView) === -1) {\n\t\t\tthis.loader.insert(loader.hostView, 0);\n\t\t\t// this.loader.insert(viewRef, 0);\n\t\t}\n\t\tviewRef.reattach();\n\t\tviewRef.markForCheck();\n\t}\n\n\tprivate detectChangesOnChild(viewRef: EmbeddedViewRef<ListItemContext>, index: number) {\n\t\t// Manually detect changes in child view ref\n\t\tviewRef.markForCheck();\n\t\tviewRef.detectChanges();\n\t}\n\n\tprivate setItemTemplates() {\n\t\t// The itemTemplateQuery may be changed after list items are added that contain <template> inside,\n\t\t// so cache and use only the original template to avoid errors.\n\t\tthis.itemTemplate = this.itemTemplateQuery;\n\n\t\tif (this._templateMap) {\n\t\t\tconst templates: KeyedTemplate[] = [];\n\t\t\tthis._templateMap.forEach((value) => {\n\t\t\t\ttemplates.push(value);\n\t\t\t});\n\t\t\tthis.listView.itemTemplates = templates;\n\t\t}\n\t}\n\n\tpublic registerTemplate(key: string, template: TemplateRef<ListItemContext>) {\n\t\tif (!this._templateMap) {\n\t\t\tthis._templateMap = new Map<string, KeyedTemplate>();\n\t\t}\n\n\t\tconst keyedTemplate = {\n\t\t\tkey,\n\t\t\tcreateView: () => {\n\t\t\t\treturn this.getOrCreate(template);\n\t\t\t},\n\t\t};\n\n\t\tthis._templateMap.set(key, keyedTemplate);\n\t}\n\n\tviewPool = new Map<\n\t\tTemplateRef<ListItemContext>,\n\t\t{\n\t\t\tscrapSize: number;\n\t\t\tscrapHead: Set<EmbeddedViewRef<ListItemContext>>;\n\t\t}\n\t>();\n\n\tprivate storeViewRef(viewRef: EmbeddedViewRef<any>) {\n\t\tconst templateRef = this.viewToTemplate.get(viewRef);\n\t\tif (templateRef) {\n\t\t\tconst scrap = this.viewPool.get(templateRef);\n\t\t\tif (scrap) {\n\t\t\t\tif (scrap.scrapHead.size >= scrap.scrapSize) {\n\t\t\t\t\tviewRef.destroy();\n\t\t\t\t\tthis.viewToLoader.get(viewRef)?.destroy();\n\t\t\t\t} else {\n\t\t\t\t\tscrap.scrapHead.add(viewRef);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tviewToTemplate = new WeakMap<EmbeddedViewRef<any>, TemplateRef<any>>();\n\tviewToLoader = new WeakMap<EmbeddedViewRef<any>, ComponentRef<DetachedLoader>>();\n\n\tprivate getOrCreate(templateRef: TemplateRef<ListItemContext>) {\n\t\treturn this._ngZone.run(() => {\n\t\t\tlet viewRef = this.getView(templateRef);\n\t\t\tif (!viewRef) {\n\t\t\t\tconst loader = this.detachedLoaderFactory();\n\t\t\t\t// viewRef = this.loader.createEmbeddedView(templateRef, new ListItemContext(), 0);\n\t\t\t\tviewRef = loader.instance.vc.createEmbeddedView(templateRef, new ListItemContext(), 0);\n\t\t\t\tthis.viewToLoader.set(viewRef, loader);\n\t\t\t\tthis.viewToTemplate.set(viewRef, templateRef);\n\t\t\t}\n\t\t\tviewRef.detach();\n\t\t\tconst resultView = getItemViewRoot(viewRef);\n\t\t\tresultView[NG_VIEW] = viewRef;\n\t\t\tresultView.reusable = this.autoReuseViews;\n\t\t\treturn resultView;\n\t\t});\n\t}\n\n\tprivate getView(templateRef: TemplateRef<ListItemContext>) {\n\t\tconst pool = this.getViewPool(templateRef);\n\t\twhile (pool.scrapHead.size > 0) {\n\t\t\tconst viewRef: EmbeddedViewRef<ListItemContext> = pool.scrapHead.values().next().value;\n\t\t\tpool.scrapHead.delete(viewRef);\n\t\t\tif (!viewRef.destroyed) {\n\t\t\t\treturn viewRef;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate templatesChanges() {\n\t\tconst templates = new Set([this._itemTemplate, this._groupTemplate, this._footerTemplate, this._headerTemplate, this._itemSwipeTemplate, this._loadOnDemandTemplate]);\n\t\tconst toDelete = [];\n\t\tthis.viewPool.forEach((v, key) => {\n\t\t\tif (!templates.has(key)) {\n\t\t\t\tv.scrapHead.forEach((viewRef) => {\n\t\t\t\t\tviewRef.destroy();\n\t\t\t\t\tthis.viewToTemplate.delete(viewRef);\n\t\t\t\t});\n\t\t\t\tv.scrapHead.clear();\n\t\t\t\ttoDelete.push(key);\n\t\t\t}\n\t\t});\n\t\ttoDelete.forEach((k) => this.viewPool.delete(k));\n\t}\n\n\tprivate getViewPool(templateRef: TemplateRef<ListItemContext>) {\n\t\tif (!this.viewPool.has(templateRef)) {\n\t\t\tthis.viewPool.set(templateRef, {\n\t\t\t\tscrapSize: this.autoReuseViews ? Infinity : 0,\n\t\t\t\tscrapHead: new Set<EmbeddedViewRef<ListItemContext>>(),\n\t\t\t});\n\t\t}\n\t\treturn this.viewPool.get(templateRef);\n\t}\n}\n\n@Directive({\n\tselector: 'ListViewLinearLayout',\n})\nexport class ListViewLinearLayoutDirective {\n\tconstructor() {}\n}\n\n@Directive({\n\tselector: 'ListViewGridLayout',\n})\nexport class ListViewGridLayoutDirective {\n\tconstructor() {}\n}\n\n@Directive({\n\tselector: 'ListViewStaggeredLayout',\n})\nexport class ListViewStaggeredLayoutDirective {\n\tconstructor() {}\n}\n\n@Directive({\n\tselector: 'ReorderHandle',\n})\nexport class ReorderHandleDirective {\n\tconstructor() {}\n}\n\n@Directive({\n\tselector: '[tkListViewHeader]',\n})\nexport class TKListViewHeaderDirective implements OnInit {\n\tconstructor(@Inject(RadListViewComponent) private owner: RadListViewComponent, @Inject(TemplateRef) private template: TemplateRef<any>) {}\n\n\tngOnInit() {\n\t\tthis.owner.headerTemplate = this.template;\n\t}\n}\n\n@Directive({\n\tselector: '[tkListViewFooter]',\n})\nexport class TKListViewFooterDirective implements OnInit {\n\tconstructor(@Inject(RadListViewComponent) private owner: RadListViewComponent, @Inject(TemplateRef) private template: TemplateRef<any>) {}\n\n\tngOnInit() {\n\t\tthis.owner.footerTemplate = this.template;\n\t}\n}\n\n@Directive({\n\tselector: '[tkListItemSwipeTemplate]',\n})\nexport class TKListViewItemSwipeDirective implements OnInit {\n\tconstructor(@Inject(RadListViewComponent) private owner: RadListViewComponent, @Inject(TemplateRef) private template: TemplateRef<any>) {}\n\n\tngOnInit() {\n\t\tthis.owner.itemSwipeTemplate = this.template;\n\t}\n}\n\n@Directive({\n\tselector: '[tkListItemTemplate]',\n})\nexport class TKListViewItemDirective implements OnInit {\n\tconstructor(@Inject(RadListViewComponent) private owner: RadListViewComponent, @Inject(TemplateRef) private template: TemplateRef<any>) {}\n\n\tngOnInit() {\n\t\tthis.owner.itemTemplate = this.template;\n\t}\n}\n\n@Directive({\n\tselector: '[tkGroupTemplate]',\n})\nexport class TKGroupTemplateDirective implements OnInit {\n\tconstructor(@Inject(RadListViewComponent) private owner: RadListViewComponent, @Inject(TemplateRef) private template: TemplateRef<any>) {}\n\n\tngOnInit() {\n\t\tthis.owner.groupTemplate = this.template;\n\t}\n}\n\n@Directive({\n\tselector: '[tkTemplateKey]',\n})\nexport class TKTemplateKeyDirective {\n\tconstructor(private templateRef: TemplateRef<any>, @Host() private owner: RadListViewComponent) {}\n\n\t@Input()\n\tset tkTemplateKey(value: any) {\n\t\tif (this.owner && this.templateRef) {\n\t\t\tthis.owner.registerTemplate(value, this.templateRef);\n\t\t}\n\t}\n}\n\n@Directive({\n\tselector: '[tkListLoadOnDemandTemplate]',\n})\nexport class TKListViewLoadOnDemandDirective implements OnInit {\n\tconstructor(@Inject(RadListViewComponent) private owner: RadListViewComponent, @Inject(TemplateRef) private template: TemplateRef<any>) {}\n\n\tngOnInit() {\n\t\tthis.owner.loadOnDemandTemplate = this.template;\n\t}\n}\n\n@Directive({\n\tselector: '[tkListViewLayout]',\n})\nexport class TKListViewLayoutDirective implements OnInit {\n\tconstructor(@Inject(RadListViewComponent) private owner: RadListViewComponent, @Inject(ElementRef) private _elementRef: ElementRef) {}\n\n\tngOnInit() {\n\t\tconst layout = this._elementRef.nativeElement;\n\t\tthis.owner.setLayout(layout);\n\t}\n}\n\nexport function getItemViewRoot(viewRef: EmbeddedViewRef<any>, rootLocator: RootLocator = extractSingleViewRecursive): View {\n\treturn rootLocator(viewRef.rootNodes, 0);\n}\n\nexport const LISTVIEW_DIRECTIVES = [RadListViewComponent, TKListViewItemDirective, TKListViewItemSwipeDirective, TKListViewHeaderDirective, TKListViewFooterDirective, TKListViewLoadOnDemandDirective, TKListViewLayoutDirective, ListViewGridLayoutDirective, ListViewStaggeredLayoutDirective, ReorderHandleDirective, ListViewLinearLayoutDirective, TKTemplateKeyDirective, TKGroupTemplateDirective];\n\nregisterElement('RadListView', () => RadListView);\nregisterElement('ListViewLinearLayout', () => <any>ListViewLinearLayout);\nregisterElement('ListViewGridLayout', () => <any>ListViewGridLayout);\nregisterElement('ListViewStaggeredLayout', () => <any>ListViewStaggeredLayout);\nregisterElement('ReorderHandle', () => ReorderHandle);\n\n@NgModule({\n\tdeclarations: [LISTVIEW_DIRECTIVES],\n\texports: [LISTVIEW_DIRECTIVES],\n\tschemas: [NO_ERRORS_SCHEMA],\n})\nexport class NativeScriptUIListViewModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;;;;AAoBA,SAAS,kBAAkB,CAAC,GAAQ,EAAA;AACnC,IAAA,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC;AAAE,QAAA,OAAO,KAAK,CAAC;AACnC,IAAA,QACC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC;AAClB,SAAC,EAAE,GAAG,YAAY,GAAG,CAAC;YACrB,MAAM,CAAC,QAAQ,IAAI,GAAG,CAAC,EACvB;AACH,CAAC;AAED,SAAS,UAAU,CAAC,CAAM,EAAA;AACzB,IAAA,OAAO,CAAC,KAAK,IAAI,KAAK,OAAO,CAAC,KAAK,UAAU,IAAI,OAAO,CAAC,KAAK,QAAQ,CAAC,CAAC;AACzE,CAAC;AAEK,MAAO,eAAgB,SAAQ,UAAU,CAAA;IAC9C,WAAmB,CAAA,SAAe,EAAS,IAAU,EAAS,KAAc,EAAS,IAAc,EAAS,GAAa,EAAS,QAAiB,EAAA;QAClJ,KAAK,CAAC,IAAI,CAAC,CAAC;QADM,IAAS,CAAA,SAAA,GAAT,SAAS,CAAM;QAAS,IAAI,CAAA,IAAA,GAAJ,IAAI,CAAM;QAAS,IAAK,CAAA,KAAA,GAAL,KAAK,CAAS;QAAS,IAAI,CAAA,IAAA,GAAJ,IAAI,CAAU;QAAS,IAAG,CAAA,GAAA,GAAH,GAAG,CAAU;QAAS,IAAQ,CAAA,QAAA,GAAR,QAAQ,CAAS;KAElJ;AACD,CAAA;MAaY,oBAAoB,CAAA;AA8BhC,IAAA,WAAA,CAAwC,WAAuB,EAAmC,gBAAiC,EAA+C,SAAsC,EAA0B,OAAe,EAAA;QAAzN,IAAW,CAAA,WAAA,GAAX,WAAW,CAAY;QAAmC,IAAgB,CAAA,gBAAA,GAAhB,gBAAgB,CAAiB;QAA+C,IAAS,CAAA,SAAA,GAAT,SAAS,CAA6B;QAA0B,IAAO,CAAA,OAAA,GAAP,OAAO,CAAQ;AAZhP,QAAA,IAAA,CAAA,aAAa,GAAG,IAAI,YAAY,EAAO,CAAC;QAChD,IAAc,CAAA,cAAA,GAAG,KAAK,CAAC;QAoKvB,IAAuB,CAAA,uBAAA,GAAY,IAAI,CAAC;AA6PjD,QAAA,IAAA,CAAA,QAAQ,GAAG,IAAI,GAAG,EAMf,CAAC;AAiBJ,QAAA,IAAA,CAAA,cAAc,GAAG,IAAI,OAAO,EAA0C,CAAC;AACvE,QAAA,IAAA,CAAA,YAAY,GAAG,IAAI,OAAO,EAAsD,CAAC;AA7ahF,QAAA,IAAI,CAAC,SAAS,GAAG,WAAW,CAAC,aAAa,CAAC;AAC3C,QAAA,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;;QAGnB,IAAI,CAAC,SAAS,CAAC,cAAc,GAAG,IAAI,oBAAoB,EAAE,CAAC;QAE3D,MAAM,SAAS,GAAG,IAAI,CAAC;AACvB,QAAA,IAAI,CAAC,SAAS,CAAC,gBAAgB,GAAG,MAAW;YAC5C,IAAI,IAAI,CAAC,MAAM,EAAE;AAChB,gBAAA,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC;AACpB,aAAA;AACF,SAAC,CAAC;QAEF,IAAI,CAAC,SAAS,CAAC,qBAAqB,GAAG,CAAC,MAAY,EAAE,KAAW,KAAU;;YAEpE,IAAI,CAAC,SAAU,CAAC,QAAQ,CAAC,WAAW,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;AAC3D,SAAC,CAAC;QAEF,IAAI,CAAC,SAAS,CAAC,cAAc,GAAG,CAAC,QAAQ,KAAU;AAClD,YAAA,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAK;AAC5B,gBAAA,QAAQ,QAAQ;oBACf,KAAK,gBAAgB,CAAC,QAAQ;AAC7B,wBAAA,IAAI,SAAS,CAAC,aAAa,IAAI,IAAI,CAAC,MAAM,EAAE;;4BAE3C,MAAM,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;AACvD,4BAAA,OAAO,SAAS,CAAC;AACjB,yBAAA;wBACD,MAAM;oBACP,KAAK,gBAAgB,CAAC,aAAa;AAClC,wBAAA,IAAI,SAAS,CAAC,kBAAkB,IAAI,IAAI,CAAC,MAAM,EAAE;AAChD,4BAAA,MAAM,UAAU,GAAG,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,SAAS,CAAC,kBAAkB,EAAE,IAAI,eAAe,EAAE,EAAE,CAAC,CAAC,CAAC;AAC1G,4BAAA,MAAM,SAAS,GAAG,eAAe,CAAC,UAAU,CAAC,CAAC;AAC9C,4BAAA,SAAS,CAAC,OAAO,CAAC,GAAG,UAAU,CAAC;AAChC,4BAAA,OAAO,SAAS,CAAC;AACjB,yBAAA;wBACD,MAAM;oBACP,KAAK,gBAAgB,CAAC,gBAAgB;AACrC,wBAAA,IAAI,SAAS,CAAC,qBAAqB,IAAI,IAAI,CAAC,MAAM,EAAE;AACnD,4BAAA,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,SAAS,CAAC,qBAAqB,EAAE,IAAI,eAAe,EAAE,EAAE,CAAC,CAAC,CAAC;4BAC1G,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;AACvC,4BAAA,MAAM,UAAU,GAAG,eAAe,CAAC,OAAO,CAAC,CAAC;AAC5C,4BAAA,UAAU,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC;AAC9B,4BAAA,OAAO,UAAU,CAAC;AAClB,yBAAA;wBACD,MAAM;oBACP,KAAK,gBAAgB,CAAC,UAAU;AAC/B,wBAAA,IAAI,SAAS,CAAC,eAAe,IAAI,IAAI,CAAC,MAAM,EAAE;AAC7C,4BAAA,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,SAAS,CAAC,eAAe,EAAE,IAAI,eAAe,EAAE,EAAE,CAAC,CAAC,CAAC;4BACpG,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;AACvC,4BAAA,MAAM,UAAU,GAAG,eAAe,CAAC,OAAO,CAAC,CAAC;AAC5C,4BAAA,UAAU,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC;AAC9B,4BAAA,OAAO,UAAU,CAAC;AAClB,yBAAA;wBACD,MAAM;oBACP,KAAK,gBAAgB,CAAC,SAAS;AAC9B,wBAAA,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,gBAAgB,IAAI,IAAI,CAAC,SAAS,CAAC,2BAA2B,EAAE;4BACnF,MAAM;AACN,yBAAA;AAED,wBAAA,IAAI,SAAS,CAAC,cAAc,IAAI,IAAI,CAAC,MAAM,EAAE;AAC5C,4BAAA,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,SAAS,CAAC,cAAc,EAAE,IAAI,eAAe,EAAE,EAAE,CAAC,CAAC,CAAC;4BACnG,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;AACvC,4BAAA,MAAM,UAAU,GAAG,eAAe,CAAC,OAAO,CAAC,CAAC;AAC5C,4BAAA,UAAU,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC;AAC9B,4BAAA,OAAO,UAAU,CAAC;AAClB,yBAAA;wBACD,MAAM;oBACP,KAAK,gBAAgB,CAAC,UAAU;AAC/B,wBAAA,IAAI,SAAS,CAAC,eAAe,IAAI,IAAI,CAAC,MAAM,EAAE;AAC7C,4BAAA,MAAM,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,SAAS,CAAC,eAAe,EAAE,IAAI,eAAe,EAAE,EAAE,CAAC,CAAC,CAAC;4BACpG,IAAI,CAAC,oBAAoB,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;AACvC,4BAAA,MAAM,UAAU,GAAG,eAAe,CAAC,OAAO,CAAC,CAAC;AAC5C,4BAAA,UAAU,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC;AAC9B,4BAAA,OAAO,UAAU,CAAC;AAClB,yBAAA;wBACD,MAAM;AACP,iBAAA;AACF,aAAC,CAAC,CAAC;AACJ,SAAC,CAAC;KACF;IAzFD,qBAAqB,GAAA;QACpB,MAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,cAAc,EAAE;AACvD,YAAA,KAAK,EAAE,CAAC;AACR,SAAA,CAAC,CAAC;AACH,QAAA,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;AACtB,QAAA,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACxB,QAAA,OAAO,GAAG,CAAC;KACX;IAoFD,eAAe,GAAA;QACd,IAAI,CAAC,gBAAgB,EAAE,CAAC;KACxB;IAED,WAAW,GAAA;AACV,QAAA,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;AACtB,QAAA,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC;AAC1C,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AACrB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;AACzB,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC3B,QAAA,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;AAErB,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,QAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;AACpB,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;AAC5B,QAAA,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC;AAC1B,QAAA,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;AAC3B,QAAA,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC;AAC/B,QAAA,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QAClC,IAAI,IAAI,CAAC,YAAY,EAAE;AACtB,YAAA,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;AAC1B,SAAA;AACD,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC;KACzB;AAED,IAAA,IAAW,aAAa,GAAA;QACvB,OAAO,IAAI,CAAC,SAAS,CAAC;KACtB;AAED,IAAA,IAAW,QAAQ,GAAA;QAClB,OAAO,IAAI,CAAC,SAAS,CAAC;KACtB;IAED,IAAI,oBAAoB,CAAC,KAAuB,EAAA;AAC/C,QAAA,IAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;AACnC,QAAA,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;KACzB;IAED,IAAI,cAAc,CAAC,KAA8B,EAAA;AAChD,QAAA,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;AAC7B,QAAA,IAAI,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE;AACvB,YAAA,IAAI,CAAC,SAAS,CAAC,kBAAkB,EAAE,CAAC;AACpC,SAAA;AAAM,aAAA,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE;AAClC,YAAA,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,EAAE,CAAC;AAClC,SAAA;KACD;IAED,IAAI,aAAa,CAAC,KAA8B,EAAA;AAC/C,QAAA,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;KAC5B;IAED,IAAI,cAAc,CAAC,KAA8B,EAAA;AAChD,QAAA,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;AAC7B,QAAA,IAAI,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE;AACvB,YAAA,IAAI,CAAC,SAAS,CAAC,kBAAkB,EAAE,CAAC;AACpC,SAAA;AAAM,aAAA,IAAI,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE;AAClC,YAAA,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,EAAE,CAAC;AAClC,SAAA;KACD;IAED,IAAI,YAAY,CAAC,KAA8B,EAAA;AAC9C,QAAA,IAAI,CAAC,aAAa,GAAG,KAAK,CAAC;AAC3B,QAAA,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;KACzB;IAED,IAAI,iBAAiB,CAAC,KAA8B,EAAA;AACnD,QAAA,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;AAChC,QAAA,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;KACzB;IAID,IAAa,KAAK,CAAC,KAAU,EAAA;AAC5B,QAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QAEpB,IAAI,UAAU,GAAG,IAAI,CAAC;QAEtB,IAAI,KAAK,YAAY,eAAe,EAAE;YACrC,UAAU,GAAG,KAAK,CAAC;AACnB,SAAA;AAED,QAAA,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE;AAClB,YAAA,IAAI,UAAU,IAAI,kBAAkB,CAAC,KAAK,CAAC,EAAE;AAC5C,gBAAA,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,KAAK,CAAC,KAAK,EAAE,IAAI,KAAK,IAAI,CAAC,CAAC,CAAC;AACvG,aAAA;YACD,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;AACnC,SAAA;KACD;IAED,SAAS,GAAA;QACR,IAAI,IAAI,CAAC,OAAO,EAAE;AACjB,YAAA,MAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;AAC/C,YAAA,IAAI,OAAO,EAAE;AACZ,gBAAA,MAAM,cAAc,GAAG;AACtB,oBAAA,KAAK,EAAE,CAAC;AACR,oBAAA,KAAK,EAAE,CAAC;AACR,oBAAA,OAAO,EAAE,CAAC;AACV,oBAAA,OAAO,EAAE,CAAC;iBACV,CAAC;AACF,gBAAA;oBACC,EAAE,EAAE,EAAE,OAAO,CAAC,gBAAgB,EAAE,GAAG,EAAE,OAAO,EAAE;oBAC9C,EAAE,EAAE,EAAE,OAAO,CAAC,gBAAgB,EAAE,GAAG,EAAE,OAAO,EAAE;oBAC9C,EAAE,EAAE,EAAE,OAAO,CAAC,kBAAkB,EAAE,GAAG,EAAE,SAAS,EAAE;oBAClD,EAAE,EAAE,EAAE,OAAO,CAAC,qBAAqB,EAAE,GAAG,EAAE,SAAS,EAAE;iBACrD,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,GAAG,EAAiF,KAAI;oBACpG,MAAM,SAAS,GAAa,EAAE,CAAC;oBAC/B,EAAE,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,MAAiC,KAAI;AACtD,wBAAA,IAAI,OAAO,MAAM,CAAC,aAAa,KAAK,QAAQ,IAAI,OAAO,MAAM,CAAC,YAAY,KAAK,QAAQ,EAAE;AACxF,4BAAA,SAAS,CAAC,IAAI,CAAC,CAAA,EAAG,MAAM,CAAC,aAAa,CAAA,IAAA,EAAO,MAAM,CAAC,YAAY,CAAA,CAAE,CAAC,CAAC;AACpE,yBAAA;AAAM,6BAAA;AACN,4BAAA,SAAS,CAAC,IAAI,CAAC,CAAA,EAAG,MAAM,CAAC,aAAa,IAAI,MAAM,CAAC,YAAY,IAAI,CAAC,CAAA,CAAE,CAAC,CAAC;AACtE,yBAAA;AACD,wBAAA,cAAc,CAAC,GAAG,CAAC,EAAE,CAAC;AACvB,qBAAC,CAAC,CAAC;AACH,oBAAA,OAAO,CAAG,EAAA,GAAG,CAAI,CAAA,EAAA,SAAS,GAAG,CAAC;AAC/B,iBAAC,CAAC,CAAC;gBAEH,IAAI,iBAAiB,GAAG,CAAC,CAAC;gBAC1B,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,EAAE;AACxC,oBAAA,iBAAiB,EAAE,CAAC;AACpB,iBAAA;gBACD,IAAI,iBAAiB,GAAG,CAAC,CAAC;AAC1B,gBAAA,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,MAAM,EAAE;AAC/B,oBAAA,iBAAiB,EAAE,CAAC;AACpB,iBAAA;gBACD,MAAM,gBAAgB,GAAG,CAAC,cAAc,CAAC,KAAK,KAAK,iBAAiB,IAAI,cAAc,CAAC,OAAO,KAAK,iBAAiB,KAAK,cAAc,CAAC,KAAK,GAAG,iBAAiB,IAAI,cAAc,CAAC,OAAO,GAAG,iBAAiB,CAAC;AAEhN,gBAAA,IAAI,CAAC,gBAAgB,IAAI,KAAK,EAAE;AAC/B,oBAAA,MAAM,cAAc,GAAqB,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC;AAC5E,oBAAA,IAAI,cAAc,EAAE;AACnB,wBAAA,MAAM,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;AACjC,wBAAA,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;wBAC3B,MAAM,cAAc,GAAG,MAAK;4BAC3B,IAAI,WAAW,GAAG,cAAc,CAAC,KAAK,EAAe,CAAC,IAAI,EAAE,CAAC;AAC7D,4BAAA,OAAO,CAAC,kBAAkB,CAAC,CAAC,MAAiC,KAAI;AAChE,gCAAA,WAAW,CAAC,SAAS,CAAC,WAAW,CAAC,wBAAwB,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC,CAAC;AACtF,6BAAC,CAAC,CAAC;4BACH,IAAI,WAAW,CAAC,KAAK,EAAE;AACtB,gCAAA,cAAc,CAAC,uBAAuB,CAAC,WAAW,CAAC,CAAC;AACpD,6BAAA;4BACD,WAAW,GAAG,cAAc,CAAC,KAAK,EAAe,CAAC,IAAI,EAAE,CAAC;AACzD,4BAAA,OAAO,CAAC,gBAAgB,CAAC,CAAC,IAAI,KAAI;AACjC,gCAAA,WAAW,CAAC,SAAS,CAAC,WAAW,CAAC,wBAAwB,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC,CAAC;AACnF,6BAAC,CAAC,CAAC;4BACH,IAAI,WAAW,CAAC,KAAK,EAAE;AACtB,gCAAA,cAAc,CAAC,uBAAuB,CAAC,WAAW,CAAC,CAAC;AACpD,6BAAA;4BACD,WAAW,GAAG,cAAc,CAAC,KAAK,EAAe,CAAC,IAAI,EAAE,CAAC;AACzD,4BAAA,OAAO,CAAC,gBAAgB,CAAC,CAAC,IAAI,KAAI;gCACjC,cAAc,CAAC,8BAA8B,CAAC,WAAW,CAAC,wBAAwB,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC,CAAC,EAAE,WAAW,CAAC,wBAAwB,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC,CAAC;AACxK,6BAAC,CAAC,CAAC;4BACH,WAAW,GAAG,cAAc,CAAC,KAAK,EAAe,CAAC,IAAI,EAAE,CAAC;AACzD,4BAAA,OAAO,CAAC,qBAAqB,CAAC,CAAC,IAAI,KAAI;AACtC,gCAAA,WAAW,CAAC,SAAS,CAAC,WAAW,CAAC,wBAAwB,CAAC,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC,CAAC;AACnF,6BAAC,CAAC,CAAC;4BACH,IAAI,WAAW,CAAC,KAAK,EAAE;AACtB,gCAAA,cAAc,CAAC,uBAAuB,CAAC,WAAW,CAAC,CAAC;AACpD,6BAAA;AACD,4BAAA,SAAS,CAAC,KAAK,GAAG,MAAM,CAAC;AAC1B,yBAAC,CAAC;wBAEF,IAAI,IAAI,CAAC,uBAAuB,EAAE;4BACjC,cAAc,CAAC,6BAA6B,CAAC,cAAc,EAAE,MAAK,GAAG,CAAC,CAAC;AACvE,yBAAA;AAAM,6BAAA;AACN,4BAAA,MAAM,CAAC,uBAAuB,CAAC,MAAK;gCACnC,cAAc,CAAC,6BAA6B,CAAC,cAAc,EAAE,MAAK,GAAG,CAAC,CAAC;AACxE,6BAAC,CAAC,CAAC;AACH,yBAAA;AACD,qBAAA;AACD,iBAAA;AAAM,qBAAA;oBACN,IAAI,CAAC,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;AACnC,oBAAA,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;AACzB,iBAAA;AACD,aAAA;AACD,SAAA;KACD;AAGM,IAAA,qBAAqB,CAAC,IAAS,EAAA;AACrC,QAAA,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;AACzB,QAAA,MAAM,WAAW,GAAG,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC;QAC7C,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;;;AAIhC,QAAA,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,YAAY,UAAU,IAAI,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,GAAG,CAAC,EAAE;AACnF,YAAA,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;AAC1C,SAAA;AAED,QAAA,IAAI,MAAM,EAAE;YACX,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,WAAW,EAAE,KAAK,CAAC,CAAC;YAC9C,IAAI,IAAI,CAAC,OAAO,EAAE;;AAEjB,gBAAA,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;AACzB,aAAA;AACD,YAAA,IAAI,CAAC,oBAAoB,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;AACzC,SAAA;KACD;AAGM,IAAA,yBAAyB,CAAC,IAAS,EAAA;AACzC,QAAA,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;YACf,OAAO;AACP,SAAA;QACD,IAAI,MAAM,GAAyB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;;;AAItD,QAAA,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,YAAY,UAAU,IAAI,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,GAAG,CAAC,EAAE;AACnF,YAAA,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;AAC1C,SAAA;;AAGD,QAAA,IAAI,MAAM,EAAE;AACX,YAAA,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;AACzB,SAAA;KACD;AAGM,IAAA,uBAAuB,CAAC,IAAS,EAAA;AACvC,QAAA,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;YACf,OAAO;AACP,SAAA;QACD,IAAI,MAAM,GAAyB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;;;AAItD,QAAA,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,YAAY,UAAU,IAAI,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,GAAG,CAAC,EAAE;AACnF,YAAA,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;AAC1C,SAAA;;AAGD,QAAA,IAAI,MAAM,EAAE;YACX,MAAM,CAAC,MAAM,EAAE,CAAC;AAChB,SAAA;KACD;AAGM,IAAA,uBAAuB,CAAC,IAAS,EAAA;AACvC,QAAA,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;YACf,OAAO;AACP,SAAA;AACD,QAAA,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;YACrB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACxC,SAAA;;QAED,IAAI,MAAM,GAAyB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;;;;AAKtD,QAAA,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,YAAY,UAAU,IAAI,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,GAAG,CAAC,EAAE;AACnF,YAAA,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC;AAC1C,SAAA;AAED,QAAA,IAAI,MAAM,EAAE;YACX,MAAM,CAAC,MAAM,EAAE,CAAC;AAChB,YAAA,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;AAC1B,SAAA;KACD;AAEM,IAAA,YAAY,CAAC,OAA6B,EAAE,IAAS,EAAE,KAAa,EAAA;AAC1E,QAAA,MAAM,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;AAChC,QAAA,OAAO,CAAC,SAAS,GAAG,IAAI,CAAC;AACzB,QAAA,OAAO,CAAC,IAAI,GAAG,IAAI,CAAC;AACpB,QAAA,OAAO,CAAC,QAAQ,GAAG,IAAI,GAAG,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;AAC7C,QAAA,OAAO,CAAC,KAAK,GAAG,KAAK,CAAC;QACtB,OAAO,CAAC,IAAI,GAAG,KAAK,GAAG,CAAC,KAAK,CAAC,CAAC;AAC/B,QAAA,OAAO,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,IAAI,CAAC;QAE5B,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;;KAEvF;AAEM,IAAA,SAAS,CAAC,MAAW,EAAA;AAC3B,QAAA,IAAI,CAAC,SAAS,CAAC,cAAc,GAAG,MAAM,CAAC;KACvC;AAEO,IAAA,WAAW,CAAC,OAAyC,EAAA;QAC5D,MAAM,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AAC9C,QAAA,IAAI,MAAM,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE;YAC1D,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;;AAEvC,SAAA;QACD,OAAO,CAAC,QAAQ,EAAE,CAAC;QACnB,OAAO,CAAC,YAAY,EAAE,CAAC;KACvB;IAEO,oBAAoB,CAAC,OAAyC,EAAE,KAAa,EAAA;;QAEpF,OAAO,CAAC,YAAY,EAAE,CAAC;QACvB,OAAO,CAAC,aAAa,EAAE,CAAC;KACxB;IAEO,gBAAgB,GAAA;;;AAGvB,QAAA,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,iBAAiB,CAAC;QAE3C,IAAI,IAAI,CAAC,YAAY,EAAE;YACtB,MAAM,SAAS,GAAoB,EAAE,CAAC;YACtC,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,KAAK,KAAI;AACnC,gBAAA,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AACvB,aAAC,CAAC,CAAC;AACH,YAAA,IAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,SAAS,CAAC;AACxC,SAAA;KACD;IAEM,gBAAgB,CAAC,GAAW,EAAE,QAAsC,EAAA;AAC1E,QAAA,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE;AACvB,YAAA,IAAI,CAAC,YAAY,GAAG,IAAI,GAAG,EAAyB,CAAC;AACrD,SAAA;AAED,QAAA,MAAM,aAAa,GAAG;YACrB,GAAG;YACH,UAAU,EAAE,MAAK;AAChB,gBAAA,OAAO,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;aAClC;SACD,CAAC;QAEF,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,GAAG,EAAE,aAAa,CAAC,CAAC;KAC1C;AAUO,IAAA,YAAY,CAAC,OAA6B,EAAA;QACjD,MAAM,WAAW,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AACrD,QAAA,IAAI,WAAW,EAAE;YAChB,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;AAC7C,YAAA,IAAI,KAAK,EAAE;gBACV,IAAI,KAAK,CAAC,SAAS,CAAC,IAAI,IAAI,KAAK,CAAC,SAAS,EAAE;oBAC5C,OAAO,CAAC,OAAO,EAAE,CAAC;oBAClB,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,CAAC;AAC1C,iBAAA;AAAM,qBAAA;AACN,oBAAA,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AAC7B,iBAAA;AACD,aAAA;AACD,SAAA;KACD;AAKO,IAAA,WAAW,CAAC,WAAyC,EAAA;AAC5D,QAAA,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,MAAK;YAC5B,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;YACxC,IAAI,CAAC,OAAO,EAAE;AACb,gBAAA,MAAM,MAAM,GAAG,IAAI,CAAC,qBAAqB,EAAE,CAAC;;AAE5C,gBAAA,OAAO,GAAG,MAAM,CAAC,QAAQ,CAAC,EAAE,CAAC,kBAAkB,CAAC,WAAW,EAAE,IAAI,eAAe,EAAE,EAAE,CAAC,CAAC,CAAC;gBACvF,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;gBACvC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,OAAO,EAAE,WAAW,CAAC,CAAC;AAC9C,aAAA;YACD,OAAO,CAAC,MAAM,EAAE,CAAC;AACjB,YAAA,MAAM,UAAU,GAAG,eAAe,CAAC,OAAO,CAAC,CAAC;AAC5C,YAAA,UAAU,CAAC,OAAO,CAAC,GAAG,OAAO,CAAC;AAC9B,YAAA,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC;AAC1C,YAAA,OAAO,UAAU,CAAC;AACnB,SAAC,CAAC,CAAC;KACH;AAEO,IAAA,OAAO,CAAC,WAAyC,EAAA;QACxD,MAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;AAC3C,QAAA,OAAO,IAAI,CAAC,SAAS,CAAC,IAAI,GAAG,CAAC,EAAE;AAC/B,YAAA,MAAM,OAAO,GAAqC,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC;AACvF,YAAA,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;AAC/B,YAAA,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE;AACvB,gBAAA,OAAO,OAAO,CAAC;AACf,aAAA;AACD,SAAA;AACD,QAAA,OAAO,IAAI,CAAC;KACZ;IAEO,gBAAgB,GAAA;AACvB,QAAA,MAAM,SAAS,GAAG,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,cAAc,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,eAAe,EAAE,IAAI,CAAC,kBAAkB,EAAE,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC;QACtK,MAAM,QAAQ,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,GAAG,KAAI;AAChC,YAAA,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;gBACxB,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,OAAO,KAAI;oBAC/B,OAAO,CAAC,OAAO,EAAE,CAAC;AAClB,oBAAA,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;AACrC,iBAAC,CAAC,CAAC;AACH,gBAAA,CAAC,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC;AACpB,gBAAA,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AACnB,aAAA;AACF,SAAC,CAAC,CAAC;AACH,QAAA,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;KACjD;AAEO,IAAA,WAAW,CAAC,WAAyC,EAAA;QAC5D,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE;AACpC,YAAA,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,WAAW,EAAE;gBAC9B,SAAS,EAAE,IAAI,CAAC,cAAc,GAAG,QAAQ,GAAG,CAAC;gBAC7C,SAAS,EAAE,IAAI,GAAG,EAAoC;AACtD,aAAA,CAAC,CAAC;AACH,SAAA;QACD,OAAO,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;KACtC;;AApgBW,oBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,kBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,oBAAoB,kBA8BZ,UAAU,EAAA,EAAA,EAAA,KAAA,EAA2C,eAAe,EAAqD,EAAA,EAAA,KAAA,EAAA,2BAA2B,aAA0D,MAAM,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;AA9B5N,oBAAA,CAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,IAAA,EAAA,oBAAoB,8hBAiBlB,WAAW,EAAA,WAAA,EAAA,IAAA,EAAA,IAAA,EAAU,WAAW,EAAA,CAAA,EAAA,WAAA,EAAA,CAAA,EAAA,YAAA,EAAA,QAAA,EAAA,KAAA,EAAA,IAAA,EAAA,SAAA,EAAA,CAAA,QAAA,CAAA,EAAA,WAAA,EAAA,IAAA,EAAA,IAAA,EAHjB,gBAAgB,EArBnC,CAAA,EAAA,QAAA,EAAA,EAAA,EAAA,QAAA,EAAA,CAAA;;;;AAIT,CAAA,CAAA,EAAA,QAAA,EAAA,IAAA,EAAA,eAAA,EAAA,EAAA,CAAA,uBAAA,CAAA,MAAA,EAAA,CAAA,CAAA;2FAGW,oBAAoB,EAAA,UAAA,EAAA,CAAA;kBAThC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,QAAQ,EAAE,aAAa;AACvB,oBAAA,QAAQ,EAAE,CAAA;;;;AAIT,CAAA,CAAA;oBACD,eAAe,EAAE,uBAAuB,CAAC,MAAM;AAC/C,iBAAA,CAAA;;0BA+Ba,MAAM;2BAAC,UAAU,CAAA;;0BAAoC,MAAM;2BAAC,eAAe,CAAA;;0BAA8C,MAAM;2BAAC,2BAA2B,CAAA;;0BAAmD,MAAM;2BAAC,MAAM,CAAA;4CAhBxK,MAAM,EAAA,CAAA;sBAArE,SAAS;uBAAC,QAAQ,EAAE,EAAE,IAAI,EAAE,gBAAgB,EAAE,MAAM,EAAE,KAAK,EAAE,CAAA;gBAGG,iBAAiB,EAAA,CAAA;sBAAjF,YAAY;uBAAC,WAAW,EAAE,EAAE,IAAI,EAAE,WAAW,EAAE,MAAM,EAAE,KAAK,EAAE,CAAA;gBAC9C,aAAa,EAAA,CAAA;sBAA7B,MAAM;gBACE,cAAc,EAAA,CAAA;sBAAtB,KAAK;gBAoKG,uBAAuB,EAAA,CAAA;sBAA/B,KAAK;gBACG,OAAO,EAAA,CAAA;sBAAf,KAAK;gBACO,KAAK,EAAA,CAAA;sBAAjB,KAAK;gBA0GC,qBAAqB,EAAA,CAAA;sBAD3B,YAAY;uBAAC,qBAAqB,EAAE,CAAC,QAAQ,CAAC,CAAA;gBAuBxC,yBAAyB,EAAA,CAAA;sBAD/B,YAAY;uBAAC,yBAAyB,EAAE,CAAC,QAAQ,CAAC,CAAA;gBAoB5C,uBAAuB,EAAA,CAAA;sBAD7B,YAAY;uBAAC,uBAAuB,EAAE,CAAC,QAAQ,CAAC,CAAA;gBAoB1C,uBAAuB,EAAA,CAAA;sBAD7B,YAAY;uBAAC,uBAAuB,EAAE,CAAC,QAAQ,CAAC,CAAA;;MA4KrC,6BAA6B,CAAA;AACzC,IAAA,WAAA,GAAA,GAAgB;;0HADJ,6BAA6B,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;8GAA7B,6BAA6B,EAAA,QAAA,EAAA,sBAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA;2FAA7B,6BAA6B,EAAA,UAAA,EAAA,CAAA;kBAHzC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,QAAQ,EAAE,sBAAsB;AAChC,iBAAA,CAAA;;MAQY,2BAA2B,CAAA;AACvC,IAAA,WAAA,GAAA,GAAgB;;wHADJ,2BAA2B,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;4GAA3B,2BAA2B,EAAA,QAAA,EAAA,oBAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA;2FAA3B,2BAA2B,EAAA,UAAA,EAAA,CAAA;kBAHvC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,QAAQ,EAAE,oBAAoB;AAC9B,iBAAA,CAAA;;MAQY,gCAAgC,CAAA;AAC5C,IAAA,WAAA,GAAA,GAAgB;;6HADJ,gCAAgC,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;iHAAhC,gCAAgC,EAAA,QAAA,EAAA,yBAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA;2FAAhC,gCAAgC,EAAA,UAAA,EAAA,CAAA;kBAH5C,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,QAAQ,EAAE,yBAAyB;AACnC,iBAAA,CAAA;;MAQY,sBAAsB,CAAA;AAClC,IAAA,WAAA,GAAA,GAAgB;;mHADJ,sBAAsB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;uGAAtB,sBAAsB,EAAA,QAAA,EAAA,eAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA;2FAAtB,sBAAsB,EAAA,UAAA,EAAA,CAAA;kBAHlC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,QAAQ,EAAE,eAAe;AACzB,iBAAA,CAAA;;MAQY,yBAAyB,CAAA;IACrC,WAAkD,CAAA,KAA2B,EAA+B,QAA0B,EAAA;QAApF,IAAK,CAAA,KAAA,GAAL,KAAK,CAAsB;QAA+B,IAAQ,CAAA,QAAA,GAAR,QAAQ,CAAkB;KAAI;IAE1I,QAAQ,GAAA;QACP,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC;KAC1C;;sHALW,yBAAyB,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EACjB,oBAAoB,EAAA,EAAA,EAAA,KAAA,EAA+C,WAAW,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;0GADtF,yBAAyB,EAAA,QAAA,EAAA,oBAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA;2FAAzB,yBAAyB,EAAA,UAAA,EAAA,CAAA;kBAHrC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,QAAQ,EAAE,oBAAoB;AAC9B,iBAAA,CAAA;;0BAEa,MAAM;2BAAC,oBAAoB,CAAA;;0BAAwC,MAAM;2BAAC,WAAW,CAAA;;MAUtF,yBAAyB,CAAA;IACrC,WAAkD,CAAA,KAA2B,EAA+B,QAA0B,EAAA;QAApF,IAAK,CAAA,KAAA,GAAL,KAAK,CAAsB;QAA+B,IAAQ,CAAA,QAAA,GAAR,QAAQ,CAAkB;KAAI;IAE1I,QAAQ,GAAA;QACP,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC;KAC1C;;sHALW,yBAAyB,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EACjB,oBAAoB,EAAA,EAAA,EAAA,KAAA,EAA+C,WAAW,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;0GADtF,yBAAyB,EAAA,QAAA,EAAA,oBAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA;2FAAzB,yBAAyB,EAAA,UAAA,EAAA,CAAA;kBAHrC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,QAAQ,EAAE,oBAAoB;AAC9B,iBAAA,CAAA;;0BAEa,MAAM;2BAAC,oBAAoB,CAAA;;0BAAwC,MAAM;2BAAC,WAAW,CAAA;;MAUtF,4BAA4B,CAAA;IACxC,WAAkD,CAAA,KAA2B,EAA+B,QAA0B,EAAA;QAApF,IAAK,CAAA,KAAA,GAAL,KAAK,CAAsB;QAA+B,IAAQ,CAAA,QAAA,GAAR,QAAQ,CAAkB;KAAI;IAE1I,QAAQ,GAAA;QACP,IAAI,CAAC,KAAK,CAAC,iBAAiB,GAAG,IAAI,CAAC,QAAQ,CAAC;KAC7C;;yHALW,4BAA4B,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EACpB,oBAAoB,EAAA,EAAA,EAAA,KAAA,EAA+C,WAAW,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;6GADtF,4BAA4B,EAAA,QAAA,EAAA,2BAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA;2FAA5B,4BAA4B,EAAA,UAAA,EAAA,CAAA;kBAHxC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,QAAQ,EAAE,2BAA2B;AACrC,iBAAA,CAAA;;0BAEa,MAAM;2BAAC,oBAAoB,CAAA;;0BAAwC,MAAM;2BAAC,WAAW,CAAA;;MAUtF,uBAAuB,CAAA;IACnC,WAAkD,CAAA,KAA2B,EAA+B,QAA0B,EAAA;QAApF,IAAK,CAAA,KAAA,GAAL,KAAK,CAAsB;QAA+B,IAAQ,CAAA,QAAA,GAAR,QAAQ,CAAkB;KAAI;IAE1I,QAAQ,GAAA;QACP,IAAI,CAAC,KAAK,CAAC,YAAY,GAAG,IAAI,CAAC,QAAQ,CAAC;KACxC;;oHALW,uBAAuB,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EACf,oBAAoB,EAAA,EAAA,EAAA,KAAA,EAA+C,WAAW,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;wGADtF,uBAAuB,EAAA,QAAA,EAAA,sBAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA;2FAAvB,uBAAuB,EAAA,UAAA,EAAA,CAAA;kBAHnC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,QAAQ,EAAE,sBAAsB;AAChC,iBAAA,CAAA;;0BAEa,MAAM;2BAAC,oBAAoB,CAAA;;0BAAwC,MAAM;2BAAC,WAAW,CAAA;;MAUtF,wBAAwB,CAAA;IACpC,WAAkD,CAAA,KAA2B,EAA+B,QAA0B,EAAA;QAApF,IAAK,CAAA,KAAA,GAAL,KAAK,CAAsB;QAA+B,IAAQ,CAAA,QAAA,GAAR,QAAQ,CAAkB;KAAI;IAE1I,QAAQ,GAAA;QACP,IAAI,CAAC,KAAK,CAAC,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC;KACzC;;qHALW,wBAAwB,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EAChB,oBAAoB,EAAA,EAAA,EAAA,KAAA,EAA+C,WAAW,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;yGADtF,wBAAwB,EAAA,QAAA,EAAA,mBAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA;2FAAxB,wBAAwB,EAAA,UAAA,EAAA,CAAA;kBAHpC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,QAAQ,EAAE,mBAAmB;AAC7B,iBAAA,CAAA;;0BAEa,MAAM;2BAAC,oBAAoB,CAAA;;0BAAwC,MAAM;2BAAC,WAAW,CAAA;;MAUtF,sBAAsB,CAAA;IAClC,WAAoB,CAAA,WAA6B,EAAkB,KAA2B,EAAA;QAA1E,IAAW,CAAA,WAAA,GAAX,WAAW,CAAkB;QAAkB,IAAK,CAAA,KAAA,GAAL,KAAK,CAAsB;KAAI;IAElG,IACI,aAAa,CAAC,KAAU,EAAA;AAC3B,QAAA,IAAI,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,WAAW,EAAE;YACnC,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;AACrD,SAAA;KACD;;mHARW,sBAAsB,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EAAA,EAAA,CAAA,WAAA,EAAA,EAAA,EAAA,KAAA,EAAA,oBAAA,EAAA,IAAA,EAAA,IAAA,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;uGAAtB,sBAAsB,EAAA,QAAA,EAAA,iBAAA,EAAA,MAAA,EAAA,EAAA,aAAA,EAAA,eAAA,EAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA;2FAAtB,sBAAsB,EAAA,UAAA,EAAA,CAAA;kBAHlC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,QAAQ,EAAE,iBAAiB;AAC3B,iBAAA,CAAA;;0BAEoD,IAAI;4CAGpD,aAAa,EAAA,CAAA;sBADhB,KAAK;;MAWM,+BAA+B,CAAA;IAC3C,WAAkD,CAAA,KAA2B,EAA+B,QAA0B,EAAA;QAApF,IAAK,CAAA,KAAA,GAAL,KAAK,CAAsB;QAA+B,IAAQ,CAAA,QAAA,GAAR,QAAQ,CAAkB;KAAI;IAE1I,QAAQ,GAAA;QACP,IAAI,CAAC,KAAK,CAAC,oBAAoB,GAAG,IAAI,CAAC,QAAQ,CAAC;KAChD;;4HALW,+BAA+B,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EACvB,oBAAoB,EAAA,EAAA,EAAA,KAAA,EAA+C,WAAW,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;gHADtF,+BAA+B,EAAA,QAAA,EAAA,8BAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA;2FAA/B,+BAA+B,EAAA,UAAA,EAAA,CAAA;kBAH3C,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,QAAQ,EAAE,8BAA8B;AACxC,iBAAA,CAAA;;0BAEa,MAAM;2BAAC,oBAAoB,CAAA;;0BAAwC,MAAM;2BAAC,WAAW,CAAA;;MAUtF,yBAAyB,CAAA;IACrC,WAAkD,CAAA,KAA2B,EAA8B,WAAuB,EAAA;QAAhF,IAAK,CAAA,KAAA,GAAL,KAAK,CAAsB;QAA8B,IAAW,CAAA,WAAA,GAAX,WAAW,CAAY;KAAI;IAEtI,QAAQ,GAAA;AACP,QAAA,MAAM,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC;AAC9C,QAAA,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;KAC7B;;sHANW,yBAAyB,EAAA,IAAA,EAAA,CAAA,EAAA,KAAA,EACjB,oBAAoB,EAAA,EAAA,EAAA,KAAA,EAA+C,UAAU,EAAA,CAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA,CAAA;0GADrF,yBAAyB,EAAA,QAAA,EAAA,oBAAA,EAAA,QAAA,EAAA,EAAA,EAAA,CAAA,CAAA;2FAAzB,yBAAyB,EAAA,UAAA,EAAA,CAAA;kBAHrC,SAAS;AAAC,YAAA,IAAA,EAAA,CAAA;AACV,oBAAA,QAAQ,EAAE,oBAAoB;AAC9B,iBAAA,CAAA;;0BAEa,MAAM;2BAAC,oBAAoB,CAAA;;0BAAwC,MAAM;2BAAC,UAAU,CAAA;;SAQlF,eAAe,CAAC,OAA6B,EAAE,cAA2B,0BAA0B,EAAA;IACnH,OAAO,WAAW,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;AAC1C,CAAC;AAEM,MAAM,mBAAmB,GAAG,CAAC,oBAAoB,EAAE,uBAAuB,EAAE,4BAA4B,EAAE,yBAAyB,EAAE,yBAAyB,EAAE,+BAA+B,EAAE,yBAAyB,EAAE,2BAA2B,EAAE,gCAAgC,EAAE,sBAAsB,EAAE,6BAA6B,EAAE,sBAAsB,EAAE,wBAAwB,EAAE;AAE3Y,eAAe,CAAC,aAAa,EAAE,MAAM,WAAW,CAAC,CAAC;AAClD,eAAe,CAAC,sBAAsB,EAAE,MAAW,oBAAoB,CAAC,CAAC;AACzE,eAAe,CAAC,oBAAoB,EAAE,MAAW,kBAAkB,CAAC,CAAC;AACrE,eAAe,CAAC,yBAAyB,EAAE,MAAW,uBAAuB,CAAC,CAAC;AAC/E,eAAe,CAAC,eAAe,EAAE,MAAM,aAAa,CAAC,CAAC;MAOzC,4BAA4B,CAAA;;yHAA5B,4BAA4B,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,QAAA,EAAA,CAAA,CAAA;0HAA5B,4BAA4B,EAAA,YAAA,EAAA,CAhpB5B,oBAAoB,EAukBpB,uBAAuB,EAXvB,4BAA4B,EAtB5B,yBAAyB,EAWzB,yBAAyB,EA0DzB,+BAA+B,EAW/B,yBAAyB,EArGzB,2BAA2B,EAO3B,gCAAgC,EAOhC,sBAAsB,EArBtB,6BAA6B,EAmF7B,sBAAsB,EAXtB,wBAAwB,CAllBxB,EAAA,OAAA,EAAA,CAAA,oBAAoB,EAukBpB,uBAAuB,EAXvB,4BAA4B,EAtB5B,yBAAyB,EAWzB,yBAAyB,EA0DzB,+BAA+B,EAW/B,yBAAyB,EArGzB,2BAA2B,EAO3B,gCAAgC,EAOhC,sBAAsB,EArBtB,6BAA6B,EAmF7B,sBAAsB,EAXtB,wBAAwB,CAAA,EAAA,CAAA,CAAA;0HA8DxB,4BAA4B,EAAA,CAAA,CAAA;2FAA5B,4BAA4B,EAAA,UAAA,EAAA,CAAA;kBALxC,QAAQ;AAAC,YAAA,IAAA,EAAA,CAAA;oBACT,YAAY,EAAE,CAAC,mBAAmB,CAAC;oBACnC,OAAO,EAAE,CAAC,mBAAmB,CAAC;oBAC9B,OAAO,EAAE,CAAC,gBAAgB,CAAC;AAC3B,iBAAA,CAAA;;;ACjsBD;;AAEG;;;;"}